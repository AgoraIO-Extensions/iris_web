/// Generated by terra, DO NOT MODIFY BY HAND.

import { ApiParam, CallApiReturnType, IrisCore } from 'iris-web-core';
import { AgoraConsole } from '../util/AgoraConsole';

{{#nodes}}
{{#user_data.isCallback}}
export class {{name}} {{#base_clazzs}}extends {{.}}{{/base_clazzs}}{

  _engine: IrisRtcEngine;

  constructor(engine: IrisRtcEngine) {
      {{#user_data.hasBaseClazzs}}
      super(engine);
      {{/user_data.hasBaseClazzs}}
      this._engine = engine;
  }

  notifyEvent(param: ApiParam): void {
      this._engine.irisEventHandlerManager.notifyEvent("RtcEngine", param);
  }

  {{#methods}}
    {{name}}({{#parameters}}{{name}}:{{type.name}},{{/parameters}}): void {
      {{#user_data.isSupport}}
      let _obj = {
        {{#parameters}}{{name}},{{/parameters}}
      };
      {{#user_data.bindingEventExtension}}
      let bufferList = eventHandlerBufferExtension(
        "{{{user_data.IrisApiIdParser.value}}}",
        _obj
      );
      {{/user_data.bindingEventExtension}}
      let _json = JSON.stringify(_obj);
      let eventParam = new IrisCore.EventParam(
        "{{{user_data.IrisApiIdParser.value}}}", 
        _json, 
        0, 
        '', 
        {{#user_data.bindingEventExtension}}bufferList as any{{/user_data.bindingEventExtension}}{{^user_data.bindingEventExtension}}[]{{/user_data.bindingEventExtension}},
        [], 
        {{#user_data.bindingEventExtension}}bufferList.length{{/user_data.bindingEventExtension}}{{^user_data.bindingEventExtension}}0{{/user_data.bindingEventExtension}},
      );
      this.notifyEvent(eventParam);
      {{/user_data.isSupport}}
      {{^user_data.isSupport}}
      AgoraConsole.warn('{{{user_data.IrisApiIdParser.value}}} not supported in this platform!');
      this._engine.returnResult(false, -ERROR_CODE_TYPE.ERR_NOT_SUPPORTED);
      {{/user_data.isSupport}}
    }

  {{/methods}}
}

{{/user_data.isCallback}}
{{^user_data.isCallback}}
export class {{name}}Dispatch {{#base_clazzs}}extends {{.}}Dispatch{{/base_clazzs}} implements {{name}}{
    {{#user_data.hasSupportApi}}
    // @ts-ignore
    _impl: {{name}}Impl;
    {{/user_data.hasSupportApi}}
    _engine: IrisRtcEngine;
    
    constructor(engine: IrisRtcEngine) {
      {{#user_data.hasBaseClazzs}}
      super(engine);
      {{/user_data.hasBaseClazzs}}
      {{#user_data.hasSupportApi}}
      this._impl = new {{name}}Impl(engine);
      {{/user_data.hasSupportApi}}
      this._engine = engine;
    }
{{#methods}}
  // @ts-ignore
  {{name}}(
    {{#user_data.isRegisterMethod}}apiParam: ApiParam{{/user_data.isRegisterMethod}}
    {{^user_data.isRegisterMethod}}{{#user_data.hasParameters}}apiParam: ApiParam{{/user_data.hasParameters}}{{/user_data.isRegisterMethod}}
    ): CallApiReturnType {
    {{#user_data.isSupport}}
    {{#user_data.isRegisterMethod}}
    let eventHandler = apiParam.buffer[0]; //obj.eventHandler;
    if (eventHandler === undefined) {
      AgoraConsole.error('eventHandler is undefined');
      throw 'eventHandler is undefined';
    }
    {{/user_data.isRegisterMethod}}
    {{^user_data.isRegisterMethod}}
    {{#user_data.hasParameters}}
    let obj = JSON.parse(apiParam.data) as any;
    {{#user_data.bindingExtension}}
    obj = callApiBufferExtension(apiParam.event, obj, apiParam.buffer);
    {{/user_data.bindingExtension}}
    {{/user_data.hasParameters}}
    {{#parameters}}
    let {{name}} = obj.{{name}};
    {{^is_output}}
    if ({{name}} === undefined) {
      AgoraConsole.error('{{name}} is undefined');
      throw '{{name}} is undefined';
    }
    {{/is_output}}
    {{/parameters}}

    {{/user_data.isRegisterMethod}}
    return this._impl.{{name}}({{#parameters}}{{name}},{{/parameters}});
    {{/user_data.isSupport}}
    {{^user_data.isSupport}}
    AgoraConsole.warn('{{{user_data.IrisApiIdParser.value}}} not supported in this platform!');
    return this._engine.returnResult(false, -ERROR_CODE_TYPE.ERR_NOT_SUPPORTED);
    {{/user_data.isSupport}}
  }

{{/methods}}
}

{{/user_data.isCallback}}
{{/nodes}}
